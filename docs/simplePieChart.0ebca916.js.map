{"version":3,"sources":["simplePieChart.js"],"names":["genders","intents","padding","deaths","current","percentage","width","height","radius","Math","min","svg","d3","select","append","attr","g","arc","innerRadius","outerRadius","color","scaleOrdinal","pie","pieChartUpdate","selectAll","data","transition","duration","console","log","d","i","_d","centroid","style","text","toFixed","pieChartCreate","arcs","enter","legendP","getFilteredData","intent","total_deaths","filter","Intent","csvMvF","require","csv","Deaths","then","$intentSelector","document","getElementById","value","onchange","e","target"],"mappings":"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","file":"simplePieChart.0ebca916.js","sourceRoot":"../src","sourcesContent":["var genders = [\"Male\", \"Female\"]\nvar intents = [\"Homicide\", \"Suicide\"]\nvar padding = 50;\n\nvar deaths = [54486, 8689, 29803, 5373];  // MS, FS, MH, FH\nvar current = [];\nvar percentage = [];\nvar width = 300;\nvar height = 200;\nvar radius = Math.min(width, height) / 2;\n\n\nvar svg = d3.select(\"body\").append(\"svg\")\n\t\t\t.attr(\"width\", width + padding)\n            .attr(\"height\", height + padding);\n            \ng = svg.append(\"g\").attr(\"transform\", \"translate(\" + (width+padding) / 2 + \",\" + (height+padding) / 2 + \")\");\n\n// Generate the arcs\nvar arc = d3.arc()\n                .innerRadius(0)\n                .outerRadius(radius);\n\nvar color = d3.scaleOrdinal(['#1F75FE','#FFC0CB']);\n\n// Generate the pie\nvar pie = d3.pie();\n\nfunction pieChartUpdate() {\n    svg.selectAll(\"path\")\n        .data(pie(current))\n        .transition()\n        .duration(2000)\n        .attr(\"d\", arc);\n    \n    // svg.selectAll(\"arc\").selectAll(\"percentage\").remove();\n    console.log(svg.selectAll(\"text.percentage\"));\n    svg.selectAll(\"text.percentage\")\n        .data(pie(current))\n        .transition()\n    \t.attr(\"transform\", function(d, i) {\n        var _d = arc.centroid(d);\n        console.log(_d);\n        _d[0] *= 2.2;\t//multiply by a constant factor\n        _d[1] *= 2.2;\t//multiply by a constant factor\n        return \"translate(\" + _d + \")\";\n      })\n      .attr(\"dy\", \".50em\")\n      .style(\"text-anchor\", \"middle\")\n      .text(function(d, i) {\n        return percentage[i].toFixed(2) + '%';\n      });\n\n    \n}\n\nfunction pieChartCreate() {\n\n    //Generate groups\n    var arcs = g.selectAll(\"arc\")\n                .data(pie(current))\n                .enter()\n                .append(\"g\")\n                .attr(\"class\", \"arc\")\n\n    //Draw arc paths\n    arcs.append(\"path\")\n        .attr(\"fill\", function(d, i) {\n            return color(i);\n        })\n        .attr(\"d\", arc);\n\n    // creates the lengend for the pie chart\n    var legendP = svg.selectAll(\".legend\")\n        .data(pie(current))\n        .enter().append(\"g\")\n        .attr(\"transform\", function(d, i){\n            return \"translate(\" + (width-50) + \",\" + (i*15 +20) + \")\";\n        })\n        .attr(\"class\", \"legend\");\n\n    legendP.append(\"rect\")\n        .attr(\"width\", 10)\n        .attr(\"height\", 10)\n        .attr(\"fill\", function(d, i){\n            return color(i);\n        });\n\n    legendP.append(\"text\")\n        .text(function(d, i){\n            return genders[i];\n        })\n        .style(\"font-size\", 12)\n        .attr(\"y\", 10)\n        .attr(\"x\", 11);\n\n    // percentages for pie chart\n    g.selectAll(\"percentage\")\n        .data(pie(current))\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"percentage\")\n    \t.attr(\"transform\", function(d, i) {\n        var _d = arc.centroid(d);\n        console.log(_d);\n        _d[0] *= 2.2;\t//multiply by a constant factor\n        _d[1] *= 2.2;\t//multiply by a constant factor\n        return \"translate(\" + _d + \")\";\n      })\n      .attr(\"dy\", \".50em\")\n      .style(\"text-anchor\", \"middle\")\n      .text(function(d, i) {\n        return percentage[i].toFixed(2) + '%';\n      });\n}\n\n// grabs the data about Male v Female, filtered on intent\nfunction getFilteredData(data, intent) {\n    if (intent == 1) { // double equals allows interpolation\n        // both homicide and suicide\n        current = [deaths[0]+deaths[2], deaths[1]+deaths[3]];\n        var total_deaths = deaths[0]+deaths[2] + deaths[1]+deaths[3]\n        percentage = [current[0]/total_deaths, current[1]/total_deaths]\n        return data;\n    } else if (intent == 2) {\n        // homicide\n        current = [deaths[2], deaths[3]];\n        var total_deaths = deaths[2] + deaths[3]\n        percentage = [current[0]/total_deaths, current[1]/total_deaths]\n        return data.filter(function(d) { return d.Intent === \"Homicide\"});\n    } else {  // intent == 3\n        // suicide\n        current = [deaths[0], deaths[1]];\n        var total_deaths = deaths[0] + deaths[1]\n        percentage = [current[0]/total_deaths, current[1]/total_deaths]\n        return data.filter(function(d) { return d.Intent === \"Suicide\"});\n    }\n}\n\n// read in CSV data\nconst csvMvF = require(\"./MvF.csv\");\nd3.csv(csvMvF, function(d) {\n        d.Deaths = +d.Deaths;\n        return d;\n}).then(function(d) {\n    var $intentSelector = document.getElementById(\"intent-select\");\n    var intent = $intentSelector.value;\n    getFilteredData(d, $intentSelector.value);\n\n    pieChartCreate();\n\n    $intentSelector.onchange = function(e) {\n        intent = e.target.value;\n        getFilteredData(d, intent);\n        console.log(current);\n  \n        pieChartUpdate();\n  \n    };\n})\n\n// html for intent selecter for piechart\n//\n//<div id=\"intent-pie\">\n//    <h3>Intent (Pie Chart):</h3>\n//      <select id=\"intent-pie-select\">\n//        <option value=1 selected>All Deaths</option>\n//        <option value=2>Homicide</option>\n//        <option value=3>Suicide</option>\n//      </select>\n//</div>"]}