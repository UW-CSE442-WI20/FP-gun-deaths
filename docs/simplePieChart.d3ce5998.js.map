{"version":3,"sources":["simplePieChart.js"],"names":["genders","intents","deaths","current","radius","Math","min","width","height","svg","d3","select","append","attr","g","arc","innerRadius","outerRadius","color","scaleOrdinal","pie","pieChartUpdate","selectAll","remove","arcs","data","enter","d","i","pieChartCreate","legendP","text","style","getFilteredData","intent","filter","Intent","csvMvF","require","csv","Deaths","then","$intentSelector","document","getElementById","value","onchange","e","target","console","log"],"mappings":"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","file":"simplePieChart.d3ce5998.js","sourceRoot":"../src","sourcesContent":["var genders = [\"Male\", \"Female\"]\nvar intents = [\"Homicide\", \"Suicide\"]\n\nvar deaths = [54486, 8689, 29803, 5373];  // MS, FS, MH, FH\nvar current = [];\nvar radius = Math.min(300, 200) / 2;\nvar width = 300;\nvar height = 200;\n\nvar svg = d3.select(\"body\").append(\"svg\")\n\t\t\t.attr(\"width\", width)\n            .attr(\"height\", height);\n            \ng = svg.append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n// Generate the arcs\nvar arc = d3.arc()\n                .innerRadius(0)\n                .outerRadius(radius);\n\nvar color = d3.scaleOrdinal(['#1F75FE','#FFC0CB']);\n\n// Generate the pie\nvar pie = d3.pie();\n\nfunction pieChartUpdate() {\n    g.selectAll(\"arc\").remove()\n    var arcs = g.selectAll(\"arc\")\n        .data(pie(current))\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"arc\")\n        .append(\"path\")\n        .attr(\"fill\", function(d, i) {\n            return color(i);\n        })\n        .attr(\"d\", arc);\n\n    \n}\n\nfunction pieChartCreate() {\n\n    //Generate groups\n    var arcs = g.selectAll(\"arc\")\n                .data(pie(current))\n                .enter()\n                .append(\"g\")\n                .attr(\"class\", \"arc\")\n\n    //Draw arc paths\n    arcs.append(\"path\")\n        .attr(\"fill\", function(d, i) {\n            return color(i);\n        })\n        .attr(\"d\", arc);\n\n    // creates the lengend for the pie chart\n    var legendP = svg.selectAll(\".legend\")\n        .data(pie(current))\n        .enter().append(\"g\")\n        .attr(\"transform\", function(d, i){\n            return \"translate(\" + (width-50) + \",\" + (i*15 +20) + \")\";\n        })\n        .attr(\"class\", \"legend\");\n\n    legendP.append(\"rect\")\n        .attr(\"width\", 10)\n        .attr(\"height\", 10)\n        .attr(\"fill\", function(d, i){\n            return color(i);\n        });\n\n    legendP.append(\"text\")\n        .text(function(d, i){\n            return genders[i];\n        })\n        .style(\"font-size\", 12)\n        .attr(\"y\", 10)\n        .attr(\"x\", 11);\n}\n\n// grabs the data about Male v Female, filtered on intent\nfunction getFilteredData(data, intent) {\n    if (intent == 1) { // double equals allows interpolation\n        // both homicide and suicide\n        current = [deaths[0]+deaths[2], deaths[1]+deaths[3]];\n        return data;\n    } else if (intent == 2) {\n        // homicide\n        current = [deaths[2], deaths[3]];\n        return data.filter(function(d) { return d.Intent === \"Homicide\"});\n    } else {  // intent == 3\n        // suicide\n        current = [deaths[0], deaths[1]];\n        return data.filter(function(d) { return d.Intent === \"Suicide\"});\n    }\n}\n\n// read in CSV data\nconst csvMvF = require(\"./MvF.csv\");\nd3.csv(csvMvF, function(d) {\n        d.Deaths = +d.Deaths;\n        return d;\n}).then(function(d) {\n    var $intentSelector = document.getElementById(\"intent-select\");\n    var intent = $intentSelector.value;\n    getFilteredData(d, $intentSelector.value);\n\n    pieChartCreate();\n\n    $intentSelector.onchange = function(e) {\n        intent = e.target.value;\n        getFilteredData(d, intent);\n        console.log(current);\n  \n        pieChartUpdate();\n  \n    };\n})\n\n// html for intent selecter for piechart\n//\n//<div id=\"intent-pie\">\n//    <h3>Intent (Pie Chart):</h3>\n//      <select id=\"intent-pie-select\">\n//        <option value=1 selected>All Deaths</option>\n//        <option value=2>Homicide</option>\n//        <option value=3>Suicide</option>\n//      </select>\n//</div>"]}